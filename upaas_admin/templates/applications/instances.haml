- extends 'applications/base.html'


- load i18n
- load compressed


- block app_content

  - if app.run_plan
    #stats-container
      %h1.text-center.text-muted
        %i.fa.fa-refresh.fa-spin
  - else
    %h3.text-center
      - trans "Application is stopped, no instances are running"


- block js_bottom
  = block.super

  - compressed_js "haml"

  :javascript
    function instances_callback(data) {
      var instances = new Array();
      $.each(data.stats, function (i, item) {
         instances.push(
          haml.compileHaml('upaas-haml-template-instance')({
            instance: item
          })
         );
      });
      $('#stats-container').html(instances.join('\n'));
    }

    function update_instances() {
      Dajaxice.upaas_admin.apps.applications.instances(instances_callback, {
        "app_id":"{{ app.safe_id }}"
      });
    }

    $(document).ready(function(){
      window.setTimeout(update_instances, 1000);
      window.setInterval(update_instances, 3000);
    });


- block haml_templates
  = block.super
  - include "applications/partials/instance.js.haml"
