### BEGIN base.ini

# plugins
autoload = true
plugins-dir = /usr/lib/uwsgi/plugins

# common settings
master = true
vacuum = true
no-orphans = true

# processes name settings
auto-procname = true
procname-prefix-spaced = [%(var_app_id) @ %(var_pkg_id)]

# defaults
post-buffering = 4096
buffer-size = 8192

# listen socket
socket = %(var_socket)

# stats socket
stats = %(var_stats)
# needed for stats
memory-report = true

# running uid and gid
uid = %(var_uid)
gid = %(var_gid)

# cheap idle workers
idle = 300

# worker count limits
processes = %(var_max_workers)

# those options are set only if cheaper is enabled
if-opt = cheaper
# very basic limits for now
cheaper-rss-limit-soft = %(var_max_memory)
# cheaper algo settings
plugin = cheaper_busyness
cheaper-algo = busyness
endif =

# memory limit per worker
reload-on-rss = %(var_memory_per_worker)

# namespace to chroot into
namespace = %(var_namespace)

# work dir inside the chroot
chdir = %(var_chdir)

# logging
plugin = rsyslog
logger = rsyslog:127.0.0.1:514,%(var_app_id)
threaded-logger = true
rsyslog-packet-size = 4096
log-x-forwarded-for = true
log-date = true

# subscription options
auto-weight = true
unsubscribe-on-graceful-reload = true

### END base.ini
